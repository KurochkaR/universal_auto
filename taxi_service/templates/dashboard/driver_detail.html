<!DOCTYPE html>
{% load static %}
{% load i18n %}
{% include 'dashboard/dashboard-header-sidebar.html' %}

<main class="main-container">
  <div class="driver-detail-header">
    <button class="back-page">{% trans "Назад" %}</button>
    <h1>{{ object.second_name }} {{ object.name }}</h1>
  </div>

  <div class="detail-driver-block">
    <div class="detail-driver-info" data-id="{{ object.id }}">
      <div class="driver-photo">
        <img src="https://storage.googleapis.com/jobdriver-bucket/{{ object.photo }}" alt="driver-photo">
        <span>{{ object.second_name }} {{ object.name }}</span>
      </div>
      <div class="driver-data">
        <h2 class="driver-data-item">{% trans "Особисті дані" %}</h2>
        <div class="driver-flex">
          <h3 class="driver-phone-number">{% trans "Номер телефону: " %}</h3>
          <p>{{ object.phone_number }}</p>
        </div>
        <div class="driver-flex">
          <h3 class="driver-email">{% trans "Електронна пошта: " %}</h3>
          <p>{{ object.email }}</p>
        </div>
        <div class="driver-flex">
          <h3 class="driver-schema">{% trans "Схема роботи: " %}</h3>
          <p>{{ object.schema }}</p>
        </div>
        <div class="driver-flex">
          <h3 class="driver-create">{% trans "Дата початку роботи в автопарку: " %}</h3>
          <p>{{ object.created_at }}</p>
        </div>
      </div>
      <div class="driver-vehicle">
        <h2 class="driver-vehicle-item">{% trans "Поточне авто" %}</h2>
        <div class="driver-vehicle-info driver-flex">
          <img src="{% static 'app/images/index-one-block-2.webp' %}" alt="car">
          <h3 class="driver-car">{{ vehicle.number }}</h3>
          <h3 class="driver-car-name">{{ vehicle.name }}</h3>
        </div>
      </div>

      <div class="cash-control">
        <h2 class="cash-control-item">{% trans "Контроль готівки" %}</h2>
        <div class="cash-control-info">
          <div class="switch-control">
            <label class="switch">
              <span class="switch-text-left">ON</span>
              <input type="checkbox" id="switch-cash">
              <span class="slider round"></span>
              <span class="switch-text-right">OFF</span>
            </label>
          </div>

          <div class="status-cash">
            {% trans "Статус готівки:" %} <span class="circle"></span>
          </div>

          <div class="cash-control-auto">
            <label class="switch-auto">
              <input type="checkbox">
              <span class="slider-auto round"></span>
              <span class="switch-text-right">AUTO</span>
            </label>
          </div>

          <div class="percent-control-cash">
            <label for="cash-percent"> % відключення готівки</label>
            <input type="text" id="cash-percent" name="cash-percent">
            <span class="edit-icon">&#9998;</span>
          </div>
        </div>
      </div>
    </div>

    <div class="graphic-cash">
      <h2 class="graphic-cash-title">{% trans "Загальна сума" %} <span>{% trans "₴000.00" %}</span></h2>
      <div id="graphic-cash" style="width: 100%; height: 600px;"></div>

      <div class="cash-info">
        <div class="cash-info-item">
          <div class="cash-info-circle" style="background-color: #EC6323;"></div>
          <div class="cash-info-text">{% trans "Готівка" %}
            <span class="cash-amount">₴000.00
              <span class="cash-percent">00.00%</span>
            </span>
          </div>
        </div>
        <div class="cash-info-item">
          <div class="cash-info-circle" style="background-color: #A1E8B9;"></div>
          <div class="cash-info-text">{% trans "Безготівка" %}
            <span class="cash-amount">₴000.00
              <span class="cash-percent">00.00%</span>
            </span>
          </div>
        </div>
      </div>

      <div class="cash-actions">
        <div class="cash-action-item">
          <div class="cash-action-line" style="background: #EB5F5F;"></div>
          <div class="cash-action-text">{% trans "Штраф" %}
            <span class="cash-actions-sum" style="color: #EB5F5F;">-₴</span>
          </div>
        </div>
        <div class="cash-action-item">
          <div class="cash-action-line" style="background: #18a64d;"></div>
          <div class="cash-action-text">{% trans "Бонус" %}
            <span class="cash-actions-sum" style="color: #18a64d;">-₴</span>
          </div>
        </div>
      </div>
    </div>

    <div class="earnings-statistics">
      <h2 class="earnings-statistics-title">{% trans "Статистика заробітку в автопарку" %}</h2>
      <div class="earnings-statistics-period">
        <div class="common-period" id="period-window">
          <div class="custom-select" id="period-common">
            <span class="earnings-selected-option">{% trans 'Вчора' %}</span>
            <i class="fas fa-angle-down"></i>
            <ul class="options">
              <li data-value="yesterday">{% trans 'Вчора' %}</li>
              <li data-value="current_week">{% trans 'Поточний тиждень' %}</li>
              <li data-value="last_week">{% trans 'Минулий тиждень' %}</li>
              <li data-value="current_month">{% trans 'Поточний місяць' %}</li>
              <li data-value="last_month">{% trans 'Минулий місяць' %}</li>
              <li data-value="current_quarter">{% trans 'Поточний квартал' %}</li>
              <li data-value="last_quarter">{% trans 'Минулий квартал' %}</li>
              <li data-value="custom">{% trans 'Вибрати період >' %}</li>
            </ul>
          </div>
          <span class="weekly-income-dates"></span>
        </div>
        <div id="datePicker" style="display: none;">
          <label for="start_report">{% trans 'Початкова дата:' %}</label>
          <input type="date" id="start_report" name="start_date">
          <label for="end_report">{% trans 'Кінцева дата:' %}</label>
          <input type="date" id="end_report" name="end_date">
          <input class="apply-filter-button" type="button" onclick="applyDateRange()"
                 value="{% trans 'Фільтрувати' %}">
          <div id="error_message" style="display: none; color: red;"></div>
        </div>
      </div>
      <div class="clear-btn-container">
        <button class="clear-btn" onclick="clearDateRange()">{% trans "Очистити" %}</button>
      </div>
      <div class="earnings-statistics-info">
        <div class="earnings-statistics-item">
          <h3 class="earnings-statistics-title">{% trans "Заробіток  за період " %}
            <span class="earnings-statistics-amount">₴000.00</span>
          </h3>
        </div>
        <div class="earnings-statistics-cards">
          <div class="earnings-statistics-card">
            <h3 class="earnings-statistics-card-title">{% trans "Пробіг по замовленням" %}</h3>
            <span class="earnings-statistics-card-amount">{% trans "000.00 км" %}</span>
          </div>

          <div class="earnings-statistics-card">
            <h3 class="earnings-statistics-card-title">{% trans "Виконано поїздок" %}</h3>
            <span class="earnings-statistics-card-amount">{% trans "000" %}</span>
          </div>
        </div>
      </div>
    </div>

    <div class="driver-statistics">
      <div class="driver-radio-buttons">
        <input type="radio" id="driver-bonus-radio" name="driver-statistics" value="driver-bonus">
        <label for="driver-bonus-radio">Бонуси</label>

        <input type="radio" id="driver-penalty-radio" name="driver-statistics" value="driver-penalty">
        <label for="driver-penalty-radio">Штрафи</label>
      </div>
      <div class="driver-bonus-penalty-list">
        <div class="driver-bonus-item bonus">
          <div class="bonus-header">
            <h3 class="bonus-title">Бонус</h3>
            <button class="add-button-bonus">Додати</button>
          </div>
          <div class="driver-bonus-penalty-title">
            <h3 class="bonus-category">Категорія</h3>
            <h3 class="bonus-amount">Сума</h3>
            <h3 class="bonus-car">Авто</h3>
            <h3 class="bonus-description">Опис</h3>
          </div>
          {% for bonus in driver_bonus %}
            <div class="driver-bonus-penalty-info">
              <div class="bonus-category">
                <span>{{ bonus.category }}</span>
              </div>
              <div class="bonus-amount">
                <span>{{ bonus.amount }}</span>
              </div>
              <div class="bonus-car">
                <span>{{ bonus.vehicle }}</span>
              </div>
              <div class="bonus-description">
                <span>{{ bonus.description|default_if_none:"&nbsp;" }}</span>
              </div>
              <div class="btns">
                <button class="edit-bonus-btn fa fa-pencil-alt" data-id="{{ bonus.id }}"></button>
                <button class="delete-bonus-penalty-btn fa fa-times" data-id="{{ bonus.id }}"></button>
              </div>
            </div>
          {% endfor %}
        </div>
        <div class="driver-penalty-item penalty">
          <div class="penalty-header">
            <h3 class="penalty-title">Штраф</h3>
            <button class="add-button-penalty">Додати</button>
          </div>
          <div class="driver-bonus-penalty-title">
            <h3 class="bonus-category">Категорія</h3>
            <h3 class="bonus-amount">Сума</h3>
            <h3 class="bonus-car">Авто</h3>
            <h3 class="bonus-description">Опис</h3>
          </div>
          {% for penalty in driver_penalty %}
            <div class="driver-bonus-penalty-info">
              <div class="penalty-category">
                <span>{{ penalty.category }}</span>
              </div>
              <div class="penalty-amount">
                <span>{{ penalty.amount }}</span>
              </div>
              <div class="penalty-car">
                <span>{{ penalty.vehicle }}</span>
              </div>
              <div class="penalty-description">
                <span>{{ penalty.description|default_if_none:"&nbsp;" }}</span>
              </div>
              <div class="btns">
                <button class="edit-penalty-btn fa fa-pencil-alt" data-id="{{ penalty.id }}"></button>
                <button class="delete-bonus-penalty-btn fa fa-times" data-id="{{ penalty.id }}"></button>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>

  <div id="formContainer"></div>

  <div id="errorModal" class="error-modal">
    <div class="modal-content">
      <p id="errorText"></p>
    </div>
  </div>

  {% include 'dashboard/_confirmation-update-database.html' %}

  <div class="confirmation-cash-control" style="display: none;">
    <div class="container">
      <div class="confirmation-box">
        <h2>{% trans "Ви точно бажаєте вимкнути готівку та автоматичне слідкування за нею?" %}</h2>
        <div class="btn-box">
          <button class="confirmation-btn-on" id="confirmation-btn-on">{% trans "Так" %}</button>
          <button class="confirmation-btn-off" id="confirmation-btn-off">{% trans "Ні" %}</button>
        </div>
      </div>
    </div>
  </div>

  <div id="loader-confirmation-cash" class="modal">
    <div class="modal-content">
      <div class="loading-content">
        <p id="loadingMessage">{% trans 'Зачекайте поки відключиться готівка' %}</p>
        <div id="loader" class="loader"></div>
        <div id="checkmark" class="checkmark"></div>
      </div>
    </div>
  </div>
</main>

<script>
	const VehicleImg = "{% static 'app/images/index-one-block-2.webp' %}";
	const logoImageUrl = "{% static 'app/images/logo-2.svg' %}";
	let ajaxPostUrl = "{% url 'post_request' %}";
	let ajaxGetUrl = "{% url 'get_request' %}";
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js" defer></script>
<script src="{% static 'dashboard/js/header-sidebar.js' %}" defer></script>
<script src="{% static 'dashboard/js/scripts-driver.js' %}" defer></script>
<script src="{% static 'dashboard/js/scripts.js' %}" defer></script>

</body>
</html>